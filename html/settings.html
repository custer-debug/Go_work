<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel = "shortcut icon" href = "../StaticFiles/images/packy_ico.png" type = "image/png">
    <link href = "../StaticFiles/bootstrapCss/bootstrap.css" type="text/css" rel = "stylesheet">

    <title>Settings</title>
</head>


<body>
  <script>
   function logout(){
        location.replace("/logout");
    }


    function deleteUser(){
    location.replace("/delete")
    }


    if(document.cookie === ""){
        location.replace("/login");
    }



   



</script>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="/welcome" style = "margin-left: 10px; margin-top: 5px">
          <h5>
              Packy
          </h5>
      </a>

      <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav mr-auto">


              <li class="nav-item">
                  <a class="nav-link" href="#">Documentation</a>
              </li>
          </ul>
          <form>
              <input id = "Logout" class="btn btn-danger my-sm-0" style="margin-right: 10px" value = "Logout" type="button" onclick="logout()">
          </form>

      </div>
  </nav>

<div class = "container " style = "margin-top: 50px">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item">
              <a class="nav-link " id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="true">Profile</a>
          </li>
          <li class="nav-item">
              <a class="nav-link active" id="private-tab" data-toggle="tab" href="#private" role="tab" aria-controls="private" aria-selected="false">Private</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" id="site-tab" data-toggle="tab" href="#site" role="tab" aria-controls="site" aria-selected="false">Private</a>
          </li>
      </ul>


      <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show " id="profile" role="tabpanel" aria-labelledby="profile-tab">

              <label class="h6">Имя
                  <input type = "text" class = "form-control" style ="margin-top: 5px" value= "{{.Firstname}}" id = "firstname">
              </label><br>
              <label class="h6">Фамилия
                  <input type = "text" class = "form-control" style ="margin-top: 5px" value="{{.Lastname}}" id = "lastname">
              </label><br>
              <label class="h6">Телефон
                  <input type = "text" class = "form-control" style ="margin-top: 5px" value="{{.Phone}}" id = "phone">
              </label><br>
              <label class="h6">День рождения
                  <input type = "date" class = "form-control" style ="margin-top: 5px" value="{{.Birthday}}" id = "birthday">
              </label><br>
              <input type = "button" class = "btn btn-primary" value="Change" onclick="createRequestProfile()">

              <br>
              <input class = "btn btn-outline-danger" value = "Delete account" type = "button"
                     data-toggle="modal" data-target="#exampleModal"  style = "margin-top: 100px">



              <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Удаление страницы</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                              </button>
                          </div>
                          <div class="modal-body">
                              <h6>
                                  Вы уверены что хотите удалить страницу?
                              </h6>
                          </div>
                          <div class="modal-footer">
                              <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                              <button type="button" class="btn btn-outline-danger" onclick="deleteUser()">Yes</button>
                          </div>
                      </div>
                  </div>
              </div>




          </div>


          <div class="tab-pane fade show active" id="private" role="tabpanel" aria-labelledby="private-tab">
<div class = "bg-light">
              <form action="/welcome" class = "container" id = "form">
                  <div class="form-group row">
                      <label for="staticEmail" class="col-sm-2 col-form-label">Email</label>
                      <div class="col-sm-10">
                          <input type="text" readonly class="form-control-plaintext" id="staticEmail" value="{{.Login}}">

                      </div>
                  </div>
                  <div class="form-group row">


                      <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
                      <div class="col-sm-3 card"  >
                          <div>
                          <input type="password" id="inputPassword" class = "form-control" placeholder="Password" style = "margin-top: 10px; width: 200px">
                            </div>

                        <div>
                            <input  type="password" class="form-control" id="inputPassword1"  placeholder="New password" style = "margin-top: 10px; width: 200px">
                        
                        </div>
                    
                        <small id="passwordHelpInline" class="text-muted">
                            Must be 8-20 characters long.
                        </small>
                            <div>
                                <input  type="password" class="form-control" id="inputPassword2"  placeholder="New password" style = "margin-top: 10px; width: 200px">
                            </div>


                          
                          <input type = "button" id = "button" class="btn btn-outline-primary" value="Change password" style = "margin-bottom: 10px; margin-top: 10px" >
                      </div>
                  </div>

              </form>
</div>
          </div>




          <div class="tab-pane fade" id="site" role="tabpanel" aria-labelledby="site-tab">



          </div>





      </div>


</div>
<script>


function sendRequestProfile(toSend){

const json = JSON.stringify(toSend)
const xhr = new XMLHttpRequest();
xhr.open("POST","/settings");
xhr.setRequestHeader('Content-Type',"application/json");
xhr.send(json);
 //alert(json);
}


function createRequestProfile(){
 const Data = {
     firstname:document.getElementById("firstname").value,
     lastname:document.getElementById("lastname").value,
     phone:document.getElementById("phone").value,
     birthday:document.getElementById("birthday").value,
 }
 sendRequestProfile(Data);
}





function createRequestPassword(){
 const Password = {
     oldPassword: document.getElementById("inputPassword").value,
     newPassword1: document.getElementById("inputPassword1").value,
     newPassword2: document.getElementById("inputPassword2").value,
 }
 sendRequestProfile(Password)
}







        const button = document.getElementById('button');
        const password = document.getElementById('inputPassword');
        const password1 = document.getElementById('inputPassword1');
        const password2 = document.getElementById('inputPassword2');
        
      

        button.addEventListener("click", (e) => {
            e.preventDefault();
            checkInputs();
        });

        function checkInputs(){
         
           const passwordValue = password.value.trim();
           const password1Value = password.value
           const password2Value = password.value

            var tmp = true;

           if(passwordValue === ""){
            password.parentElement.className = 'form-control is-invalid';
            tmp = false;
           }
           if(password1Value === ""){
            password1.parentElement.className = 'form-control is-invalid';
            tmp = false;
          
          }
           if(password2Value === ""){
            password2.parentElement.className = 'form-control is-invalid';
            tmp = false;
           }
           if (tmp){ //Create comparison comparison of two strings
            
               alert("Im here");
           } 

             
         

        }

</script>


  <script src = "../StaticFiles/bootstrapJs/bootstrap.js"></script>
</body>
</html>








